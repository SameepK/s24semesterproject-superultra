<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="quick_menu.css">
    <link rel="stylesheet" href="menu_toggle.css">
    <link rel="stylesheet" href="quick_menu.css">
    <link rel="stylesheet" href="menu_toggle.css">
    <style>
        .content {
            display: flex;
            width: 50%;
            grid-template-columns: 1fr 1fr; /* Two columns */
            gap: 0%; /* Gap between cells */
            margin-top: 5%; /* Adjust margin-top to account for header */
            column-gap: 40%;
            column-width: 40%;
        }

        .column {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .cell {
            background-color: #f0f0f0; /* Cell background color */
            padding: 4%;
            border-radius: 2%;
            margin: 8%;
            flex-direction: row;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Box shadow for cell */
        }

        .budTotal {
            width: 200%;
            height: 20%;
        }

        .budItem {
            width: 180%;
            height: 20%;
        }

        .rightCell {
            width: 200%;
            height: 20%;
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            /*background-color: #333; /* Adjust background color as needed */
            padding: 3% 0; /* Adjust padding as needed */
            text-align: center; /* Align text in the center horizontally */
            color: #333; /* Text color */
        }

    </style>
</head>
<body>
    <header>
        <h1>Main Page</h1>
    </header>
    <div class="menu-toggle" id="menuToggle">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
    <!--<div class="quick-menu" id="quickMenu" include="./quick_menu.html"></div>-->
    <!--<script src="inject.js"></script>-->
    <div class="quick-menu" id="quickMenu">
        <div class="user-info">
            <img src="user-icon.jpg" alt="Profile Picture">
            <span class="username" id="username">username</span>
          </div>
          <ul class="menu-options">
            <li><a href="home.html">Home</a></li>
            <li><a href="#">Account</a></li>
            <li><a href="financialGoal.html">Financial Goal</a></li>
            <li><a href="#">Credit Score</a></li>
            <li><a href="CostomizeCategory.html">Create New Category</a></li>
            <li><a href="#">Standard Investments</a></li>
            <li><a href="#">Bond Investments</a></li>
            <li><a href="#">Combined Expenses</a></li>
            <li><a href="#">Education</a></li>
            <li><a href="setting.html">Settings</a></li>
          </ul>
    </div>
    <script src="quick_menu.js"></script>
    
    <div class="content">
        <div class="column">
            <div class="cell budTotal" id="budTotal">
                <h2>Total Budget</h2>
                <p>000.00/000.00</p>
            </div>
            <div class="cell budItem" id="bud1">
                <h2>Category 1</h2>
                <p>000.00/000.00</p>
            </div>
            <div class="cell budItem" id="bud2">
                <h2>Category 1</h2>
                <p>000.00/000.00</p>
            </div>
            <div class="cell budItem" id="bud2">
                <h2>Category 1</h2>
                <p>000.00/000.00</p>
            </div>
        </div>
        <div class="column">
            <div class="cell rightCell" onclick="redirectToDetailsPage('Main Account', 12345.67, 'User Name', '1234567890')">
                <h2>Main Account</h2>
                <p>12345.67</p>
            </div>
            <div class="cell rightCell" onclick="redirectToDetailsPage('Second Account', 12345.67, 'User Name', '1234567890')">
                <h2>Second Account</h2>
                <p>12345.67</p>
            </div>
            <div class="cell rightCell" onclick="redirectToDebtPage()">
                <h2>Debt Account</h2>
                <p>-12345.67</p>
            </div>
            
        </div>
    </div>
<!--So far added just the burger menu. Will need to throw in the actual main page items too-->
    <script src="home.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    fetchCategories();
});
function redirectToDetailsPage(accountName, amount, userName, accountNumber) {
    const queryParams = new URLSearchParams({
        accountName,
        amount,
        userName,
        accountNumber
    }).toString();

    window.location.href = `account_details.html?${queryParams}`;
}

function redirectToDebtPage() {
    window.location.href = `debtvalgpt.html`;
}


function fetchCategories() {
    fetch('getCategory.php')
        .then(response => response.json())
        .then(data => {
            if(data.success && data.categories) {
                updateCategoryElements(data.categories);
            } else {
                console.error('Failed to fetch categories:', data.message);
            }
        })
        .catch(error => console.error('Error fetching categories:', error));
}

function updateCategoryElements(categories) {
    categories.forEach((category, index) => {
        // Assuming there are exactly 3 budItem elements and their ids are bud1, bud2, and bud3
        const budElement = document.getElementById(`bud${index + 1}`);
        if(budElement) {
            budElement.innerHTML = `<h2>${category.Name}</h2><p>${category.CurrentBudget}/${category.TotalBudget}</p>`;
        }
    });
}
    </script>
</body>
</html>